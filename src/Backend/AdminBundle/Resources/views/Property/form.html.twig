<script src="{{ asset('bundles/pizotearkadmin/js/dropzone/dropzone.js') }}"></script>
<link rel="stylesheet" href="{{ asset('bundles/pizotearkadmin/js/dropzone/dropzone.css') }}">

<style>
	.input-group {
		z-index: 0;
	}
</style>

		<div class="header">
			<div class="container">
				<div class="row">


					{% if edit is defined %}
						<div class="col-md-10">
							<h3 class="header-title">{{ 'label_edit'|trans }} {{ 'label_property'|trans }}</h3>
						</div>
						<div class="col-md-2">
							{% if isAdShared != 0 %}

								<div class="col-md-12 text-right">
									<label class="pull-right" >{{ 'label_property_share_ad_msg'|trans }}{{ isAdSharedDays }}&nbsp;{{ 'label_days'|trans }}</label>
								</div>
								<div class="clearfix"></div>
								<div class="col-md-8">&nbsp;</div>
								<div class="col-md-2 text-right"></div>

								<div class="col-md-2">
									<a class="pull-right btn btn-primary " href="{{ path('backend_admin_property_delete_ad', {propertyID: entity.id, ticketID: isAdShared}) }}">
										{{ 'label_property_delete_ad'|trans }}
									</a>
								</div>


							{% else %}

								<div class="col-md-8">&nbsp;</div>
								<div class="col-md-2 text-right"></div>
								<div class="col-md-2 text-right">
									<a class="pull-right btn btn-primary " href="{{ path('backend_admin_property_share_ad', {propertyID: entity.id}) }}">
										{{ 'label_property_share_ad'|trans }}
									</a>
								</div>
							{% endif %}


							{#<button type="submit" class="btn btn-primary">Change Tenant</button>#}
						</div>

					{% else %}
						<div class="col-md-6">
							<h3 class="header-title">{{ 'label_create_new'|trans }} {{ 'label_property'|trans }}</h3>
						</div>

					{% endif %}

					{% if new is defined %}
						{{ include('BackendAdminBundle:Complex:sessionComplex.html.twig') }}
					{% endif %}


				</div>

				<div class="row">
					<div class="col-md-12">
						<blockquote>
							<div class="col-md-11">
								<p> {{ 'label_add_property_advice'|trans }} </p>
							</div>
							<div class="col-md-1 text-right">
								<i style="font-size:80px;" class="fa fa-question-circle" aria-hidden="true"></i>
							</div>
						</blockquote>
					</div>
				</div>

			</div>
		</div>

		<!-- CONTENT -->
		<div class="main-content no-bordertop">

			<div class="container">



				{{ form_start(form) }}
				{{ form_errors(form) }}

					<fieldset>

						{% if edit is defined %}
							{% if propertyContract is not null and tenantContract is not null%}
								<input type="hidden" name="tenantContract" value="{{ tenantContract.id }}">
								<input type="hidden" name="propertyContract" value="{{ propertyContract.id }}">
							{% else %}
								<input type="hidden" name="tenantContract" value="0">
								<input type="hidden" name="propertyContract" value="0">

							{% endif %}

						{% endif %}

						<div class="clearfix"></div>
						

						<div class="form-inputs-g">


							<div class="row">
								<div class="col-md-4 form-group">
                                                                    <label class="txt-blue-bold">{{ 'label_complex_sector'|trans }}:</label>                                                                    
                                                                    {{ form_errors(form.complexSector) }}
                                                                    {{ form_widget(form.complexSector, { 'attr': {'class' : 'form-control classic' } } ) }}                                                                    
								</div>

								<div class="col-md-4 form-group">
                                                                    <label class="txt-blue-bold">{{ 'label_property_number'|trans }}: </label>									
                                                                    {{ form_errors(form.propertyNumber) }}
                                                                    {{ form_widget(form.propertyNumber, { 'attr': {'class' : 'form-control', 'maxlength': '6' } } ) }}									
								</div>


								<div class="col-md-4 form-group">
                                                                    <label class="txt-blue-bold">{{ 'label_property_type'|trans }}:</label>									
                                                                    {{ form_errors(form.propertyType) }}
                                                                    {{ form_widget(form.propertyType, { 'attr': {'class' : 'form-control classic' } }
                                                                    ) }}									
								</div>

							</div>
							<hr style="border-width: 1px; border-style: dashed; border-color: #93a7b2;"/>
							<div class="row">
                                                            <div class="form-group col-md-6 col-md-offset-3">
                                                                <label class="txt-blue-bold">{{ 'label_address'|trans }}:</label>				
                                                                {{ form_errors(form.address) }}
                                                                {{ form_widget(form.address, { 'attr': {'class' : 'form-control rounded-0', 'rows': '6' } } ) }}
                                                            </div>
							</div>
							{% if new is defined %}								
								<div class="row">
                                                                    <div class="form-group col-md-6 col-md-offset-3">
                                                                        <label class="txt-blue-bold">{{ 'label_tenant'|trans }} {{ 'label_email'|trans }}:</label>                                                                            
                                                                        <input type="text" class="form-control" placeholder="example@example.com" name="agreement[tenant_email]" id="agreement_tenant_email">                                                                            
                                                                    </div>
                                                                    <div class="form-group col-md-6 col-md-offset-3">
                                                                        <label class="txt-blue-bold">{{ 'label_owner'|trans }} {{ 'label_email'|trans }}:</label>										
                                                                        <input type="text" class="form-control" placeholder="example@example.com" name="agreement[owner_email]" id="agreement_owner_email">
                                                                    </div>
								</div>								
								<div class="row">
									<div class="form-group col-md-6 col-md-offset-3">
                                                                            <label class="txt-blue-bold">{{ 'label_maintenance'|trans }} {{ 'label_cost'|trans }}: </label>										
                                                                            <input type="text" class="form-control" placeholder="$ 540.00" id="agreement_maintenance" name="agreement[maintenance]">
									</div>
									<div class="form-group col-md-6 col-md-offset-3">
                                                                            <label class="txt-blue-bold">{{ 'label_who_pays_maintenance'|trans }}: </label>										
                                                                            <div class="form-group" style="padding: 0px 10px">
                                                                                <label class="radio-inline"><input type="radio" name="agreement[whopaysmaintenance]" value="owner">Owner</label>
                                                                                <label class="radio-inline"><input type="radio" name="agreement[whopaysmaintenance]" checked value="tenant">Tenant</label>
                                                                            </div>
									</div>
								</div>								
								<div class="row">
									<div class="form-group col-md-6 col-md-offset-3">
                                                                            <label class="txt-blue-bold">{{ 'label_agreement_start_date'|trans }}: </label>										
                                                                            <input id="agreement_start_date" name="agreement[start]" type="date" class="form-control"/>
									</div>
									<div class="form-group col-md-6 col-md-offset-3">
                                                                            <label class="txt-blue-bold">{{ 'label_agreement_end_date'|trans }}: </label>										
                                                                            <input id="agreement_end_date" name="agreement[end]" type="date" class="form-control"/>
									</div>
								</div>
							{% endif %}

							
							<div class="row">
                                                                <div class="form-group col-md-6 col-md-offset-3">                            
                                                                    <button type="submit" class="btn btn-primary btn-ps pull-right">{{ 'label_save'|trans }}</button>   
                                                                    <a  href="{{ path('backend_admin_property_index') }}" class="btn btn-primary button-cancel  btn-ps pull-right">{{ 'label_cancel'|trans }}</a>                                                                    
                                                                    <div class="clearfix"></div>
                                                                </div>								
							</div>

						</div>

						<div class="hide">
							{{ form_rest(form) }}
						</div>
					</fieldset>
				<!--</form>-->
				{{ form_end(form) }}


			</div>

		</div>
		<!-- END: CONTENT -->


<script type="text/javascript" language="Javascript">


	$( document ).ready(function() {

		$("[name='property']").validate({
			success: function(error){

				return true;
			},

		});



		$("#agreement_tenant_email").rules("add", {required: true, email:true});
		$("#agreement_owner_email").rules("add", {required: true, email:true});
		$("#agreement_maintenance").rules("add", {required: true, number:true});
		$("#agreement_start_date").rules("add", {required: true});
		$("#agreement_end_date").rules("add", {required: true});




		//
		$("#property_complexSector").rules("add", {required: true});
		$("#property_propertyType").rules("add", {required: true});


		$('[name="property"]').on("submit", function(){
			//Code: Action (like ajax...)
			if($("[name='property']").valid()){
				$('#pizote_spinner').show();
				return true;
			}
			else{
				return false;
			}

		});



	});



</script>